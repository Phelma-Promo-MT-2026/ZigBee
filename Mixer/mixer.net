
.SUBCKT IHP_PDK_nonlinear_components_sg13_lv_nmos  gnd d g s b w=0.35u l=0.34u ng=1 m=1 as=0 ad=0 pd=0 ps=0 trise=0 z1=0.346e-6 z2=0.38e-6 wmin=0.15e-6 rfmode=0 pre_layout=1 mlist=1
X1 d g s b  sg13_lv_nmos w={w} l={l} ng={ng} m={m} as={as} ad={ad} pd={pd} 
+ ps={ps} trise={trise} z1={z1} z2={z2} wmin={wmin} rfmode={rfmode} pre_layout={pre_layout} 
.ENDS
  

Vdc:V1 Vdd gnd U="1.2V"
Sub:sg13_lv_nmos1 V_out_N VOL_Neg V_apres1 gnd Type="IHP_PDK_nonlinear_components_sg13_lv_nmos" w="0.46u" l="0.130u" ng="w/l" m="1" as="0" ad="0" pd="0" ps="0" trise="0" z1="0.346e-6" z2="0.38e-6" wmin="0.479u" rfmode="0" pre_layout="1"
Sub:sg13_lv_nmos3 V_out_N VOL_Pos1 Vapres2 gnd Type="IHP_PDK_nonlinear_components_sg13_lv_nmos" w="0.46u" l="0.130u" ng="w/l" m="1" as="0" ad="0" pd="0" ps="0" trise="0" z1="0.346e-6" z2="0.38e-6" wmin="0.479u" rfmode="0" pre_layout="1"
Sub:sg13_lv_nmos5 V_apres1 Vref_pos gnd gnd Type="IHP_PDK_nonlinear_components_sg13_lv_nmos" w="17.1u" l="0.130u" ng="w/l" m="1" as="0" ad="0" pd="0" ps="0" trise="0" z1="0.346e-6" z2="0.38e-6" wmin="0.15e-6" rfmode="0" pre_layout="1"
Sub:sg13_lv_nmos7 V_out_P VOL_Pos V_apres1 gnd Type="IHP_PDK_nonlinear_components_sg13_lv_nmos" w="0.46u" l="0.130u" ng="w/l" m="1" as="0" ad="0" pd="0" ps="0" trise="0" z1="0.346e-6" z2="0.38e-6" wmin="0.479u" rfmode="0" pre_layout="1"
.DC:DC1 Temp="26.85" reltol="0.001" abstol="1 pA" vntol="1 uV" saveOPs="no" MaxIter="150" saveAll="no" convHelper="none" Solver="CroutLU"
.CUSTOMSIM:CUSTOM1 SpiceCode="vout = vout_P-vout_N
tran 50n 15f 0 
linearize V(vout)
fft V(vout)
let s=db(V(vout))" Vars="s" Outputs=""
Sub:sg13_lv_nmos6 Vapres2 Vref_neg gnd gnd Type="IHP_PDK_nonlinear_components_sg13_lv_nmos" w="17.1u" l="0.130u" ng="w/l" m="1" as="0" ad="0" pd="0" ps="0" trise="0" z1="0.346e-6" z2="0.38e-6" wmin="0.15e-6" rfmode="0" pre_layout="1"
Sub:sg13_lv_nmos2 V_out_P VOL_Neg Vapres2 gnd Type="IHP_PDK_nonlinear_components_sg13_lv_nmos" w="0.46u" l="0.130u" ng="w/l" m="1" as="0" ad="0" pd="0" ps="0" trise="0" z1="0.346e-6" z2="0.38e-6" wmin="0.479u" rfmode="0" pre_layout="1"
Idc:Ip gnd _net1 I="4.64 mA"
Vac:V17 VOL_Pos1 gnd U="2 V" f="2.443 GHz" Phase="0" Theta="0"
Vac:V18 VOL_Neg gnd U="-2 V" f="2.443 GHz" Phase="0" Theta="0"
Vac:V19 VOL_Pos gnd U="2 V" f="2.443 GHz" Phase="0" Theta="0"
Vac:V16 _net2 gnd U="-0.4 V" f="2.445 GHz" Phase="0" Theta="0"
Vac:V15 _net0 gnd U="0.4 V" f="2.445 GHz" Phase="0" Theta="0"
.TR:TR2 Type="lin" Start="0" Stop="2800ns" Points="135000" IntegrationMethod="Trapezoidal" Order="2" InitialStep="1 ns" MinStep="1e-16" MaxIter="150" reltol="0.001" abstol="1 pA" vntol="1 uV" Temp="26.85" LTEreltol="1e-3" LTEabstol="1e-6" LTEfactor="1" Solver="CroutLU" relaxTSR="no" initialDC="yes" MaxStep="0"
